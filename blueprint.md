# 健康管理アプリ Blueprint

## 概要

このアプリは、ユーザーが日々の健康状態、服薬状況、カレンダーの予定、タスクなどを一元管理できる総合的な健康管理アプリケーションです。歩数計、睡眠データ、体重などの健康指標を記録・可視化し、日々の生活をサポートします。

さらに、AIを活用した機能として、対話形式で質問に答えるAIチャット、テキストから画像を生成するAI画像生成機能、そして1週間の健康データを基にパーソナライズされたアドバイスを通知する週次レポート機能を搭載しています。

## スタイルとデザイン

- **テーマ:** Material 3デザインをベースとし、`ColorScheme.fromSeed`を使用して、紫を基調とした統一感のあるライトテーマとダークテーマを生成しています。
- **フォント:** `google_fonts`パッケージを利用し、見出しには`Oswald`、本文には`Roboto`や`Open Sans`を使用して、可読性とデザイン性を両立させています。
- **UIコンポーネント:**
  - `ElevatedButton`や`AppBar`などの主要なウィジェットは、アプリのテーマに合わせてスタイルが統一されています。
  - チャット画面では、ユーザーとAIのメッセージが左右に分かれて表示され、直感的な対話が可能です。
- **レイアウト:** レスポンシブデザインを意識し、様々な画面サイズに対応できるよう、`Expanded`や`ListView`などを効果的に使用しています。

## 実装された機能

- **タスク管理:**
    - タスクの追加、表示、完了ステータスの切り替え。
    - タスクに1, 2, 3の3段階で優先度を設定する機能（デフォルトは2）。
    - 今後2週間のスケジュールをAIが自動生成する機能への導線を設置。
- **カレンダー:**
  - `table_calendar`を使用してイベントや予定を管理。
  - `device_calendar`と連携し、デバイスのネイティブカレンダーの予定も表示・操作。
- **健康管理 (ヘルスケア):**
  - `health`パッケージを使用して、歩数、体重、睡眠時間などの健康データを取得。
  - `fl_chart`で健康データをグラフ化し、週次レポートとして可視化。
  - AIチャットへの導線となる吹き出し型ボタンを設置。
  - AIが生成したキャラクター画像を表示。
- **経路生成:**
  - `google_maps_flutter`と`location`を使用し、現在地から目的地までのルートを地図上に表示。
- **AI機能 (Firebase AI - Gemini):**
  - **AIチャット:** `firebase_ai`を利用した対話型AI。ユーザーの質問に対してリアルタイムで応答。
  - **週次レポート通知:** `workmanager`でバックグラウンドタスクをスケジュールし、`health`パッケージで収集した直近1週間の健康データをGeminiが分析・要約。その結果を`flutter_local_notifications`でユーザーに通知。
- **その他:**
  - メモ機能
  - ユーザー登録機能
  - ゲーム機能
  - **通知設定:**
    - 服薬管理機能への導線。
    - 週次レポート通知の有効化、曜日、時間の設定機能。
  - AIのキャラクターを設定するための画像生成画面への導線を設置。

## 今回の変更: スケジュール自動生成機能への導線追加

ユーザーのタスク管理をさらに効率化するため、AIによるスケジュール自動生成機能への導線となるボタンをタスク追加画面に設置しました。

### 変更の目的
- ユーザーが手動でタスクを一つずつ登録する手間を省き、AIの力で効率的にスケジュールを作成できるようにする将来的な機能拡張の第一歩。

### 主な手順と変更点

1.  **スケジュール生成画面の新設 (`lib/schedule_screen.dart`):**
    - 今後実装されるスケジュール生成機能のためのプレースホルダー（仮の画面）として、新しい`ScheduleScreen`ウィジェットを作成しました。
    - 現時点では、「スケジュール生成機能は現在開発中です。」というテキストを表示します。

2.  **タスク追加画面へのボタン設置 (`lib/task_add_screen.dart`):**
    - 画面下部に「今後2週間のスケジュールを生成」というラベルの`ElevatedButton`を追加しました。
    - このボタンが押されると、`Navigator.push`を使用して、新しく作成した`ScheduleScreen`に遷移するように設定しました。
